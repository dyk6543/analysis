<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apple (AAPL) ì¢…í•© ë¶„ì„</title>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: linear-gradient(135deg, #1a1c2b 0%, #2C3E50 100%);
      font-family: Pretendard, sans-serif;
      color: white;
      padding: 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
    }
    .title {
      font-size: 2.5em;
      margin-bottom: 10px;
      color: #ffffff;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .subtitle {
      font-size: 1.2em;
      color: #8395A7;
      margin-bottom: 30px;
    }
    .section-container {
      background: rgba(44, 62, 80, 0.6);
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }
    .section-title {
      font-size: 1.8em;
      margin-bottom: 20px;
      color: #4ECDC4;
      border-bottom: 2px solid #4ECDC4;
      padding-bottom: 10px;
    }
    .flow-container {
      position: relative;
      margin: 40px 0;
      padding: 20px;
    }
    .flow-grid {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 20px;
      align-items: center;
    }
    .center-logo {
      width: 120px;
      height: 120px;
      background: white;
      border-radius: 50%;
      padding: 20px;
      margin: 0 40px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .center-logo svg {
      width: 100%;
      height: 100%;
    }
    .flow-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
    }
    .flow-item::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 2px;
      background: currentColor;
      top: 50%;
    }
    .flow-left {
      text-align: right;
      padding-right: 30px;
      color: #6FCF97;
    }
    .flow-left::after {
      right: -20px;
    }
    .flow-right {
      padding-left: 30px;
      color: #F5A623;
    }
    .flow-right::after {
      left: -20px;
    }
    .flow-item .icon {
      font-size: 1.5em;
    }
    .flow-item .amount {
      font-weight: bold;
      font-size: 1.1em;
    }
    .flow-item .percentage {
      opacity: 0.7;
      font-size: 0.9em;
    }
    .profit-item {
      color: #4A90E2;
      margin-top: 20px;
    }
    .chart-image {
      width: 100%;
      height: auto;
      border-radius: 10px;
      margin: 20px 0;
      min-height: 800px;
      object-fit: contain;
    }
    .analysis-point {
      margin-bottom: 20px;
      padding-left: 20px;
      position: relative;
      line-height: 1.8;
    }
    .analysis-point:before {
      content: "â€¢";
      color: #FF6B6B;
      position: absolute;
      left: 0;
    }
    .legend {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
    }
    .legend-box {
      width: 14px;
      height: 14px;
      display: inline-block;
      margin-right: 5px;
      border-radius: 3px;
    }
    .legend span {
      display: flex;
      align-items: center;
    }
    .price-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .price-card {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }
    .price-card h3 {
      color: #4ECDC4;
      margin-bottom: 10px;
      font-size: 1.2em;
    }
    .price-card .value {
      font-size: 1.8em;
      font-weight: bold;
      margin: 10px 0;
    }
    .price-card .change {
      font-size: 1.1em;
    }
    .positive { color: #6FCF97; }
    .negative { color: #FF6B6B; }
    .news-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 15px;
    }
    .news-date {
      color: #8395A7;
      font-size: 0.9em;
      margin-bottom: 5px;
    }
    .news-title {
      font-size: 1.1em;
      margin-bottom: 10px;
      color: #4ECDC4;
    }
    .news-summary {
      line-height: 1.6;
    }
    .company-intro {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 30px;
      align-items: center;
      margin-bottom: 20px;
    }
    .company-logo {
      width: 120px;
      height: 120px;
      border-radius: 20px;
      object-fit: contain;
      background: white;
      padding: 15px;
    }
    .company-info {
      line-height: 1.8;
    }
    .company-info h3 {
      color: #4ECDC4;
      margin-bottom: 10px;
      font-size: 1.4em;
    }
    .company-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }
    .stat-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 10px;
      border-radius: 8px;
      text-align: center;
    }
    .stat-item .label {
      font-size: 0.9em;
      color: #8395A7;
    }
    .stat-item .value {
      font-size: 1.1em;
      font-weight: 600;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="title">Apple (AAPL) ì¢…í•© ë¶„ì„</h1>
      <p class="subtitle">ìê¸ˆ íë¦„ ë° ì£¼ê°€ ë¶„ì„ ë¦¬í¬íŠ¸</p>
    </div>

    <div class="section-container">
      <h2 class="section-title">ğŸ¢ íšŒì‚¬ ì†Œê°œ</h2>
      <div class="company-intro">
        <img src="https://logo.clearbit.com/apple.com" alt="Apple Logo" class="company-logo">
        <div class="company-info">
          <h3>Apple Inc.</h3>
          <p>ì• í”Œì€ í˜ì‹ ì ì¸ í•˜ë“œì›¨ì–´, ì†Œí”„íŠ¸ì›¨ì–´, ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ëŠ” ê¸€ë¡œë²Œ í…Œí¬ ê¸°ì—…ì…ë‹ˆë‹¤. iPhone, iPad, Mac, Apple Watch ë“± í”„ë¦¬ë¯¸ì—„ ì œí’ˆ ë¼ì¸ì—…ê³¼ í•¨ê»˜ App Store, Apple Music, iCloud ë“± ë‹¤ì–‘í•œ ë””ì§€í„¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
          <div class="company-stats">
            <div class="stat-item">
              <div class="label">ì„¤ë¦½ì¼</div>
              <div class="value">1976ë…„ 4ì›” 1ì¼</div>
            </div>
            <div class="stat-item">
              <div class="label">ë³¸ì‚¬</div>
              <div class="value">ìº˜ë¦¬í¬ë‹ˆì•„ ì¿ í¼í‹°ë…¸</div>
            </div>
            <div class="stat-item">
              <div class="label">CEO</div>
              <div class="value">íŒ€ ì¿¡</div>
            </div>
            <div class="stat-item">
              <div class="label">ì§ì›ìˆ˜</div>
              <div class="value">164,000ëª…</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section-container">
      <h2 class="section-title">ğŸ’° ìê¸ˆ íë¦„ ë¶„ì„</h2>
      <div class="flow-container">
        <div class="flow-grid">
          <div class="flow-left-group">
            <div class="flow-item flow-left">
              <span class="icon">ğŸ“±</span>
              <div>
                <div>iPhone</div>
                <div class="amount">$69.7B</div>
                <div class="percentage">58.3%</div>
              </div>
            </div>
            <div class="flow-item flow-left">
              <span class="icon">ğŸ’»</span>
              <div>
                <div>Mac</div>
                <div class="amount">$7.8B</div>
                <div class="percentage">6.5%</div>
              </div>
            </div>
            <div class="flow-item flow-left">
              <span class="icon">ğŸ“˜</span>
              <div>
                <div>iPad</div>
                <div class="amount">$7.0B</div>
                <div class="percentage">5.9%</div>
              </div>
            </div>
            <div class="flow-item flow-left">
              <span class="icon">ğŸ› ï¸</span>
              <div>
                <div>ì„œë¹„ìŠ¤</div>
                <div class="amount">$23.1B</div>
                <div class="percentage">19.3%</div>
              </div>
            </div>
            <div class="flow-item flow-left">
              <span class="icon">ğŸ§</span>
              <div>
                <div>ì›¨ì–´ëŸ¬ë¸”/ê¸°íƒ€</div>
                <div class="amount">$12.0B</div>
                <div class="percentage">10.0%</div>
              </div>
            </div>
          </div>
          
          <div class="center-logo">
            <svg viewBox="0 0 170 170" fill="black">
              <path d="M150.37 130.25c-2.45 5.66-5.35 10.87-8.71 15.66-4.58 6.53-8.33 11.05-11.22 13.56-4.48 4.12-9.28 6.23-14.42 6.35-3.69 0-8.14-1.05-13.32-3.18-5.197-2.12-9.973-3.17-14.34-3.17-4.58 0-9.492 1.05-14.746 3.17-5.262 2.13-9.501 3.24-12.742 3.35-4.929 0.21-9.842-1.96-14.746-6.52-3.13-2.73-7.045-7.41-11.735-14.04-5.032-7.08-9.169-15.29-12.41-24.65-3.471-10.11-5.211-19.9-5.211-29.378 0-10.857 2.346-20.221 7.045-28.068 3.693-6.303 8.606-11.275 14.755-14.925s12.793-5.51 19.948-5.629c3.915 0 9.049 1.211 15.429 3.591 6.362 2.388 10.447 3.599 12.238 3.599 1.339 0 5.877-1.416 13.57-4.239 7.275-2.618 13.415-3.702 18.445-3.275 13.63 1.1 23.87 6.473 30.68 16.153-12.19 7.386-18.22 17.731-18.1 31.002 0.11 10.337 3.86 18.939 11.23 25.769 3.34 3.17 7.07 5.62 11.22 7.36-0.9 2.61-1.85 5.11-2.86 7.51zM119.11 7.24c0 8.102-2.96 15.667-8.86 22.669-7.12 8.324-15.732 13.134-25.071 12.375-0.119-0.972-0.188-1.995-0.188-3.07 0-7.778 3.386-16.102 9.399-22.908 3.002-3.446 6.82-6.311 11.45-8.597 4.62-2.252 8.99-3.497 13.1-3.71 0.12 1.083 0.17 2.17 0.17 3.24z"/>
            </svg>
          </div>
          
          <div class="flow-right-group">
            <div class="flow-item flow-right">
              <span class="icon">ğŸ§¾</span>
              <div>
                <div>ë§¤ì¶œì›ê°€</div>
                <div class="amount">$61.7B</div>
                <div class="percentage">51.6%</div>
              </div>
            </div>
            <div class="flow-item flow-right">
              <span class="icon">ğŸ§ª</span>
              <div>
                <div>ì—°êµ¬ê°œë°œë¹„</div>
                <div class="amount">$8.4B</div>
                <div class="percentage">7.0%</div>
              </div>
            </div>
            <div class="flow-item flow-right">
              <span class="icon">ğŸ“¢</span>
              <div>
                <div>íŒë§¤ê´€ë¦¬ë¹„</div>
                <div class="amount">$17.3B</div>
                <div class="percentage">14.5%</div>
              </div>
            </div>
            <div class="flow-item flow-right profit-item">
              <span class="icon">âœ…</span>
              <div>
                <div>ì˜ì—…ì´ìµ</div>
                <div class="amount">$32.2B</div>
                <div class="percentage">26.9%</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="analysis-point">
        <strong>ì‹¤ì  ë¶„ì„:</strong><br>
        - 2024ë…„ 1ë¶„ê¸° ë§¤ì¶œ: $119.6B (ì „ë…„ ëŒ€ë¹„ +2.1%)<br>
        - ì˜ì—…ì´ìµ: $32.2B (ì˜ì—…ì´ìµë¥  27%)<br>
        - iPhone ë§¤ì¶œ ë¹„ì¤‘: 58.3% ($69.7B)<br>
        - ì„œë¹„ìŠ¤ ë¶€ë¬¸ ë§¤ì¶œ: $23.1B (ì „ë…„ ëŒ€ë¹„ +16.3%)
      </div>
    </div>

    <div class="section-container">
      <h2 class="section-title">ğŸ“° ì£¼ìš” ë‰´ìŠ¤</h2>
      <div class="news-item">
        <div class="news-date">2024.04.15</div>
        <div class="news-title">ì• í”Œ, ì¤‘êµ­ ì‹œì¥ì—ì„œ iPhone íŒë§¤ ë¶€ì§„ìœ¼ë¡œ ê³ ì „</div>
        <div class="news-summary">
          í™”ì›¨ì´ì™€ ìƒ¤ì˜¤ë¯¸ ë“± ì¤‘êµ­ ë¡œì»¬ ë¸Œëœë“œì™€ì˜ ê²½ìŸ ì‹¬í™”ë¡œ ì‹œì¥ ì ìœ ìœ¨ í•˜ë½. 1ë¶„ê¸° ì¤‘êµ­ ë‚´ iPhone ì¶œí•˜ëŸ‰ ì „ë…„ ëŒ€ë¹„ 19% ê°ì†Œ.
        </div>
      </div>
      <div class="news-item">
        <div class="news-date">2024.04.10</div>
        <div class="news-title">Vision Pro íŒë§¤ í˜¸ì¡°, ê°œë°œì ìƒíƒœê³„ í™•ëŒ€ ì¤‘</div>
        <div class="news-summary">
          Vision Pro ì•±ìŠ¤í† ì–´ ë“±ë¡ ì•± ìˆ˜ 1,500ê°œ ëŒíŒŒ. ê³µê°„ ì»´í“¨íŒ… í”Œë«í¼ìœ¼ë¡œì„œì˜ ê°€ëŠ¥ì„± ì…ì¦.
        </div>
      </div>
      <div class="news-item">
        <div class="news-date">2024.04.05</div>
        <div class="news-title">ì• í”Œ, AI ê¸°ìˆ  íˆ¬ì í™•ëŒ€ ê³„íš ë°œí‘œ</div>
        <div class="news-summary">
          ìƒì„±í˜• AI ê¸°ìˆ  ê°œë°œì„ ìœ„í•œ ëŒ€ê·œëª¨ íˆ¬ì ê³„íš ê³µê°œ. Google, Microsoftì™€ì˜ AI ê²½ìŸ ë³¸ê²©í™” ì˜ˆìƒ.
        </div>
      </div>
    </div>

    <div class="section-container">
      <h2 class="section-title">ğŸ“ˆ ì£¼ê°€ ê¸°ìˆ ì  ë¶„ì„</h2>
      <img src="technical_AAPL.png" alt="AAPL Technical Analysis" class="chart-image" onerror="this.src='https://via.placeholder.com/800x600?text=Chart+Loading...'">
      
      <div class="analysis-point">
        <strong>ë‹¨ê¸° ì „ë§ (1ì£¼ì¼):</strong><br>
        í˜„ì¬ 15ë¶„ë´‰ ê¸°ì¤€ìœ¼ë¡œ 5ì¼ ì´ë™í‰ê· ì„ ì´ 20ì¼ ì´ë™í‰ê· ì„ ì„ í•˜í–¥ ëŒíŒŒí•˜ë©° ì•½ì„¸ ì‹ í˜¸ë¥¼ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤. ë³¼ë¦°ì € ë°´ë“œ í•˜ë‹¨ì— ê·¼ì ‘í•´ ìˆì–´ ê¸°ìˆ ì  ë°˜ë“± ê°€ëŠ¥ì„±ë„ ìˆìœ¼ë‚˜, ì¶”ê°€ í•˜ë½ ì‹œ $165 ì„ ì´ ì£¼ìš” ì§€ì§€ì„ ìœ¼ë¡œ ì‘ìš©í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤.
      </div>
      <div class="analysis-point">
        <strong>ì¤‘ê¸° ì „ë§ (3ê°œì›”):</strong><br>
        ì¼ë´‰ ì°¨íŠ¸ì—ì„œ 20ì¼ì„ ê³¼ 60ì¼ì„ ì´ í•˜í–¥ ë°°ì—´ì„ ë³´ì´ê³  ìˆì–´ ë‹¹ë¶„ê°„ ì•½ì„¸ íë¦„ì´ ì´ì–´ì§ˆ ê²ƒìœ¼ë¡œ ì „ë§ë©ë‹ˆë‹¤. í˜„ì¬ ì£¼ê°€ëŠ” $170 ë¶€ê·¼ì—ì„œ íš¡ë³´í•˜ê³  ìˆìœ¼ë©°, ì´ëŠ” ì£¼ìš” ì§€ì§€ì„ ìœ¼ë¡œ ì‘ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë³¼ë¦°ì € ë°´ë“œ í­ì´ ìˆ˜ì¶•í•˜ê³  ìˆì–´ í–¥í›„ í° í­ì˜ ë°©í–¥ì„± ì›€ì§ì„ì´ ì˜ˆìƒë©ë‹ˆë‹¤.
      </div>
      <div class="analysis-point">
        <strong>ì¥ê¸° ì „ë§ (1ë…„):</strong><br>
        120ì¼ ì´ë™í‰ê· ì„ ì„ ì¤‘ì‹¬ìœ¼ë¡œ í•œ ì¥ê¸° ì¶”ì„¸ëŠ” ì—¬ì „íˆ ìƒìŠ¹ì„¸ë¥¼ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤. í˜„ì¬ì˜ ì¡°ì •ì€ ìƒìŠ¹ ì¶”ì„¸ ë‚´ì—ì„œì˜ ê¸°ìˆ ì  ì¡°ì •ìœ¼ë¡œ íŒë‹¨ë˜ë©°, $160-165 êµ¬ê°„ì´ ê°•ë ¥í•œ ì§€ì§€ì„ ìœ¼ë¡œ ì‘ìš©í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤. í–¥í›„ ì‹¤ì  ë°œí‘œì™€ ê±°ì‹œê²½ì œ ìƒí™©ì— ë”°ë¼ ì¶”ì„¸ ì „í™˜ ì—¬ë¶€ê°€ ê²°ì •ë  ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
      </div>
    </div>

    <div class="section-container">
      <h2 class="section-title">ğŸ“Š ì£¼ê°€ í˜„í™© ë° íˆ¬ì ê°€ì¹˜</h2>
      <div class="price-info">
        <div class="price-card">
          <h3>í˜„ì¬ ì£¼ê°€</h3>
          <div class="value">$169.58</div>
          <div class="change negative">ì „ë…„ ëŒ€ë¹„ -8.2%</div>
        </div>
        <div class="price-card">
          <h3>ì ì • ê°€ì¹˜</h3>
          <div class="value">$185.00</div>
          <div class="change">PER 26.4ë°°</div>
        </div>
        <div class="price-card">
          <h3>ëª©í‘œ ì£¼ê°€</h3>
          <div class="value">$198.00</div>
          <div class="change positive">ìƒìŠ¹ì—¬ë ¥ +16.8%</div>
        </div>
        <div class="price-card">
          <h3>ì‹œê°€ì´ì•¡</h3>
          <div class="value">$2.62T</div>
          <div class="change">ê¸€ë¡œë²Œ ì‹œê°€ì´ì•¡ 1ìœ„</div>
        </div>
      </div>
      
      <div class="analysis-point">
        <strong>ì£¼ê°€ í•˜ë½ ìš”ì¸:</strong><br>
        - ì¤‘êµ­ ì‹œì¥ì—ì„œì˜ íŒë§¤ ë¶€ì§„ ë° ê²½ìŸ ì‹¬í™”<br>
        - ìŠ¤ë§ˆíŠ¸í° ì‹œì¥ ì„±ì¥ ë‘”í™” ë° êµì²´ ì£¼ê¸° ì¦ê°€<br>
        - ê±°ì‹œê²½ì œì  ë¶ˆí™•ì‹¤ì„±ê³¼ ê¸ˆë¦¬ ìƒìŠ¹ ì••ë°•
      </div>
      
      <div class="analysis-point">
        <strong>íˆ¬ì í¬ì¸íŠ¸:</strong><br>
        - ì„œë¹„ìŠ¤ ë¶€ë¬¸ ë§¤ì¶œì˜ ì§€ì†ì  ì„±ì¥ (ì „ë…„ ëŒ€ë¹„ +16.3%)<br>
        - Vision Pro ì¶œì‹œë¡œ ì‹ ê·œ ì„±ì¥ ë™ë ¥ í™•ë³´<br>
        - ì•ˆì •ì ì¸ í˜„ê¸ˆ ì°½ì¶œë ¥ê³¼ ì£¼ì£¼í™˜ì› ì •ì±…<br>
        - AI ê¸°ìˆ  íˆ¬ì í™•ëŒ€ ë° ì‹ ê·œ ì„œë¹„ìŠ¤ ê°œë°œ
      </div>
      
      <div class="analysis-point">
        <strong>íˆ¬ìì˜ê²¬:</strong><br>
        <span style="color: #6FCF97; font-weight: 600;">ë§¤ìˆ˜ (Buy)</span><br>
        - í˜„ì¬ ì£¼ê°€($169.58)ëŠ” ì ì •ê°€ì¹˜($185.00) ëŒ€ë¹„ 8.3% í• ì¸ëœ ìˆ˜ì¤€<br>
        - ë‹¨ê¸°ì  ì¡°ì •ì€ ì¥ê¸° íˆ¬ì ê´€ì ì—ì„œ ë§¤ìˆ˜ ê¸°íšŒë¡œ íŒë‹¨<br>
        - ëª©í‘œê°€ $198.00ê¹Œì§€ 16.8% ìƒìŠ¹ ì—¬ë ¥ ì¡´ì¬<br>
        - ë¶„í•  ë§¤ìˆ˜ ì „ëµ ê¶Œì¥ (í˜„ì¬ 30%, $165 ì§€ì§€ì„  ëŒíŒŒ ì‹œ 40%, $160 ì§€ì§€ì„  ëŒíŒŒ ì‹œ 30%)
      </div>
    </div>
  </div>

  <script>
    const leftData = [
      { label: "iPhone", amount: 69.7, icon: "ğŸ“±" },
      { label: "Mac", amount: 7.8, icon: "ğŸ’»" },
      { label: "iPad", amount: 7.0, icon: "ğŸ“˜" },
      { label: "ì„œë¹„ìŠ¤", amount: 23.1, icon: "ğŸ› ï¸" },
      { label: "ì›¨ì–´ëŸ¬ë¸”/ê¸°íƒ€", amount: 12.0, icon: "ğŸ§" }
    ];
    const rightData = [
      { label: "ë§¤ì¶œì›ê°€", amount: 61.7, icon: "ğŸ§¾" },
      { label: "ì—°êµ¬ê°œë°œë¹„", amount: 8.4, icon: "ğŸ§ª" },
      { label: "íŒë§¤ê´€ë¦¬ë¹„", amount: 17.3, icon: "ğŸ“¢" }
    ];
    const totalRevenue = 119.6;
    const totalExpense = 87.4;
    const profit = 32.2;

    function createPath(x1, y1, x2, y2) {
      const controlX = (x1 + x2) / 2;
      const curveOffset = 60;
      return `M ${x1} ${y1} C ${controlX} ${y1 + curveOffset}, ${controlX} ${y2 - curveOffset}, ${x2} ${y2}`;
    }

    function initialize() {
      const svg = document.getElementById('flowSvg');
      svg.innerHTML = '';
      
      // Set SVG viewport size
      svg.setAttribute('viewBox', '0 0 1000 600');
      svg.style.width = '100%';
      svg.style.height = '100%';
      
      const flowContainer = document.querySelector('.flow-container');
      flowContainer.querySelectorAll('.flow-item').forEach(el => el.remove());
      
      const centerX = 500; // middle of viewBox
      const centerY = 300; // middle of viewBox
      const spacing = 70;

      const defs = document.createElementNS("http://www.w3.org/2000/svg", "defs");
      defs.innerHTML = `
        <linearGradient id="greenGradient"><stop offset="0%" stop-color="#6FCF97" /><stop offset="100%" stop-color="#6FCF97" /></linearGradient>
        <linearGradient id="orangeGradient"><stop offset="0%" stop-color="#F5A623" /><stop offset="100%" stop-color="#F5A623" /></linearGradient>
        <linearGradient id="blueGradient"><stop offset="0%" stop-color="#4A90E2" /><stop offset="100%" stop-color="#4A90E2" /></linearGradient>
      `;
      svg.appendChild(defs);

      leftData.forEach((item, idx) => {
        const y = centerY - ((leftData.length + 1) * spacing) / 2 + idx * spacing;
        const x = centerX - 300;
        const percent = ((item.amount / totalRevenue) * 100).toFixed(1);
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("class", "flow-path");
        path.setAttribute("stroke", "url(#greenGradient)");
        path.setAttribute("d", createPath(x, y, centerX, centerY));
        svg.appendChild(path);
        const div = document.createElement('div');
        div.className = 'flow-item left';
        div.style.top = `${y}px`;
        div.style.left = `${x}px`;
        div.innerHTML = `<span class="icon">${item.icon}</span><span>${item.label}</span><span class="amount">$${item.amount}B</span><span class="percentage">${percent}%</span>`;
        flowContainer.appendChild(div);
      });

      rightData.forEach((item, idx) => {
        const y = centerY - ((rightData.length + 1) * spacing) / 2 + idx * spacing;
        const x = centerX + 300;
        const percent = ((item.amount / totalExpense) * 100).toFixed(1);
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("class", "flow-path");
        path.setAttribute("stroke", "url(#orangeGradient)");
        path.setAttribute("d", createPath(centerX, centerY, x, y));
        svg.appendChild(path);
        const div = document.createElement('div');
        div.className = 'flow-item right';
        div.style.top = `${y}px`;
        div.style.left = `${x}px`;
        div.innerHTML = `<span class="icon">${item.icon}</span><span>${item.label}</span><span class="amount">$${item.amount}B</span><span class="percentage">${percent}%</span>`;
        flowContainer.appendChild(div);
      });

      const y = centerY + ((rightData.length + 1) * spacing) / 2;
      const x = centerX + 300;
      const profitPercent = ((profit / totalRevenue) * 100).toFixed(1);
      const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
      path.setAttribute("class", "flow-path");
      path.setAttribute("stroke", "url(#blueGradient)");
      path.setAttribute("d", createPath(centerX, centerY, x, y));
      svg.appendChild(path);
      const div = document.createElement('div');
      div.className = 'flow-item right';
      div.style.top = `${y}px`;
      div.style.left = `${x}px`;
      div.innerHTML = `<span class="icon">âœ…</span><span>ì˜ì—…ì´ìµ</span><span class="amount">$${profit}B</span><span class="percentage">${profitPercent}%</span>`;
      flowContainer.appendChild(div);
    }

    // Call initialize immediately and on window resize
    initialize();
    let resizeTimer;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(initialize, 100);
    });
  </script>
</body>
</html>
