<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apple (AAPL) 종합 분석</title>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: linear-gradient(135deg, #1a1c2b 0%, #2C3E50 100%);
      font-family: Pretendard, sans-serif;
      color: white;
      padding: 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
    }
    .title {
      font-size: 2.5em;
      margin-bottom: 10px;
      color: #ffffff;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .subtitle {
      font-size: 1.2em;
      color: #8395A7;
      margin-bottom: 30px;
    }
    .section-container {
      background: rgba(44, 62, 80, 0.6);
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }
    .section-title {
      font-size: 1.8em;
      margin-bottom: 20px;
      color: #4ECDC4;
      border-bottom: 2px solid #4ECDC4;
      padding-bottom: 10px;
    }
    .flow-container {
      position: relative;
      height: 600px;
      margin: 2rem 0;
    }
    .center-box {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: rgba(50, 50, 60, 0.95);
      box-shadow: 0 4px 16px rgba(0,0,0,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
      border: 2px solid rgba(255,255,255,0.9);
    }
    .center-box img {
      width: 64px;
      height: 64px;
      object-fit: contain;
    }
    .flow-item {
      position: absolute;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 1.1rem;
      white-space: nowrap;
    }
    .flow-item .icon { font-size: 1.3rem; }
    .flow-item .amount { font-weight: 600; font-size: 1.2rem; }
    .flow-item .percentage { color: rgba(255,255,255,0.6); font-size: 0.95rem; }
    .flow-item.left {
      transform: translateX(-100%);
      text-align: right;
      flex-direction: row-reverse;
      margin-right: 20px;
    }
    .flow-item.right {
      transform: translateX(0%);
      margin-left: 20px;
    }
    .flow-svg {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 0;
    }
    .flow-path {
      fill: none;
      stroke-width: 2;
      stroke-dasharray: 1000;
      stroke-dashoffset: 1000;
      animation: drawPath 2s forwards;
      opacity: 0.85;
    }
    @keyframes drawPath {
      to { stroke-dashoffset: 0; }
    }
    .chart-image {
      width: 100%;
      height: auto;
      border-radius: 10px;
      margin: 20px 0;
      min-height: 800px;
      object-fit: contain;
    }
    .analysis-point {
      margin-bottom: 20px;
      padding-left: 20px;
      position: relative;
      line-height: 1.8;
    }
    .analysis-point:before {
      content: "•";
      color: #FF6B6B;
      position: absolute;
      left: 0;
    }
    .legend {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
    }
    .legend-box {
      width: 14px;
      height: 14px;
      display: inline-block;
      margin-right: 5px;
      border-radius: 3px;
    }
    .legend span {
      display: flex;
      align-items: center;
    }
    .price-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .price-card {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }
    .price-card h3 {
      color: #4ECDC4;
      margin-bottom: 10px;
      font-size: 1.2em;
    }
    .price-card .value {
      font-size: 1.8em;
      font-weight: bold;
      margin: 10px 0;
    }
    .price-card .change {
      font-size: 1.1em;
    }
    .positive { color: #6FCF97; }
    .negative { color: #FF6B6B; }
    .news-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 15px;
    }
    .news-date {
      color: #8395A7;
      font-size: 0.9em;
      margin-bottom: 5px;
    }
    .news-title {
      font-size: 1.1em;
      margin-bottom: 10px;
      color: #4ECDC4;
    }
    .news-summary {
      line-height: 1.6;
    }
    .company-intro {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 30px;
      align-items: center;
      margin-bottom: 20px;
    }
    .company-logo {
      width: 120px;
      height: 120px;
      border-radius: 20px;
      object-fit: contain;
      background: white;
      padding: 15px;
    }
    .company-info {
      line-height: 1.8;
    }
    .company-info h3 {
      color: #4ECDC4;
      margin-bottom: 10px;
      font-size: 1.4em;
    }
    .company-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }
    .stat-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 10px;
      border-radius: 8px;
      text-align: center;
    }
    .stat-item .label {
      font-size: 0.9em;
      color: #8395A7;
    }
    .stat-item .value {
      font-size: 1.1em;
      font-weight: 600;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="title">Apple (AAPL) 종합 분석</h1>
      <p class="subtitle">자금 흐름 및 주가 분석 리포트</p>
    </div>

    <div class="section-container">
      <h2 class="section-title">🏢 회사 소개</h2>
      <div class="company-intro">
        <img src="https://logo.clearbit.com/apple.com" alt="Apple Logo" class="company-logo">
        <div class="company-info">
          <h3>Apple Inc.</h3>
          <p>애플은 혁신적인 하드웨어, 소프트웨어, 서비스를 개발하는 글로벌 테크 기업입니다. iPhone, iPad, Mac, Apple Watch 등 프리미엄 제품 라인업과 함께 App Store, Apple Music, iCloud 등 다양한 디지털 서비스를 제공합니다.</p>
          <div class="company-stats">
            <div class="stat-item">
              <div class="label">설립일</div>
              <div class="value">1976년 4월 1일</div>
            </div>
            <div class="stat-item">
              <div class="label">본사</div>
              <div class="value">캘리포니아 쿠퍼티노</div>
            </div>
            <div class="stat-item">
              <div class="label">CEO</div>
              <div class="value">팀 쿡</div>
            </div>
            <div class="stat-item">
              <div class="label">직원수</div>
              <div class="value">164,000명</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section-container">
      <h2 class="section-title">💰 자금 흐름 분석</h2>
      <div class="legend">
        <span><div class="legend-box" style="background:#6FCF97"></div>매출</span>
        <span><div class="legend-box" style="background:#F5A623"></div>지출</span>
        <span><div class="legend-box" style="background:#4A90E2"></div>영업이익</span>
      </div>
      <div class="flow-container">
        <svg class="flow-svg" id="flowSvg"></svg>
        <div class="center-box">
          <img src="https://logo.clearbit.com/apple.com" alt="Apple Logo">
        </div>
      </div>
      <div class="analysis-point">
        <strong>실적 분석:</strong><br>
        - 2024년 1분기 매출: $119.6B (전년 대비 +2.1%)<br>
        - 영업이익: $32.2B (영업이익률 27%)<br>
        - iPhone 매출 비중: 58.3% ($69.7B)<br>
        - 서비스 부문 매출: $23.1B (전년 대비 +16.3%)
      </div>
    </div>

    <div class="section-container">
      <h2 class="section-title">📰 주요 뉴스</h2>
      <div class="news-item">
        <div class="news-date">2024.04.15</div>
        <div class="news-title">애플, 중국 시장에서 iPhone 판매 부진으로 고전</div>
        <div class="news-summary">
          화웨이와 샤오미 등 중국 로컬 브랜드와의 경쟁 심화로 시장 점유율 하락. 1분기 중국 내 iPhone 출하량 전년 대비 19% 감소.
        </div>
      </div>
      <div class="news-item">
        <div class="news-date">2024.04.10</div>
        <div class="news-title">Vision Pro 판매 호조, 개발자 생태계 확대 중</div>
        <div class="news-summary">
          Vision Pro 앱스토어 등록 앱 수 1,500개 돌파. 공간 컴퓨팅 플랫폼으로서의 가능성 입증.
        </div>
      </div>
      <div class="news-item">
        <div class="news-date">2024.04.05</div>
        <div class="news-title">애플, AI 기술 투자 확대 계획 발표</div>
        <div class="news-summary">
          생성형 AI 기술 개발을 위한 대규모 투자 계획 공개. Google, Microsoft와의 AI 경쟁 본격화 예상.
        </div>
      </div>
    </div>

    <div class="section-container">
      <h2 class="section-title">📈 주가 기술적 분석</h2>
      <img src="technical_AAPL.png" alt="AAPL Technical Analysis" class="chart-image" onerror="this.src='https://via.placeholder.com/800x600?text=Chart+Loading...'">
      
      <div class="analysis-point">
        <strong>단기 전망 (1주일):</strong><br>
        현재 15분봉 기준으로 5일 이동평균선이 20일 이동평균선을 하향 돌파하며 약세 신호를 보이고 있습니다. 볼린저 밴드 하단에 근접해 있어 기술적 반등 가능성도 있으나, 추가 하락 시 $165 선이 주요 지지선으로 작용할 것으로 예상됩니다.
      </div>
      <div class="analysis-point">
        <strong>중기 전망 (3개월):</strong><br>
        일봉 차트에서 20일선과 60일선이 하향 배열을 보이고 있어 당분간 약세 흐름이 이어질 것으로 전망됩니다. 현재 주가는 $170 부근에서 횡보하고 있으며, 이는 주요 지지선으로 작용하고 있습니다. 볼린저 밴드 폭이 수축하고 있어 향후 큰 폭의 방향성 움직임이 예상됩니다.
      </div>
      <div class="analysis-point">
        <strong>장기 전망 (1년):</strong><br>
        120일 이동평균선을 중심으로 한 장기 추세는 여전히 상승세를 유지하고 있습니다. 현재의 조정은 상승 추세 내에서의 기술적 조정으로 판단되며, $160-165 구간이 강력한 지지선으로 작용할 것으로 예상됩니다. 향후 실적 발표와 거시경제 상황에 따라 추세 전환 여부가 결정될 것으로 보입니다.
      </div>
    </div>

    <div class="section-container">
      <h2 class="section-title">📊 주가 현황 및 투자 가치</h2>
      <div class="price-info">
        <div class="price-card">
          <h3>현재 주가</h3>
          <div class="value">$169.58</div>
          <div class="change negative">전년 대비 -8.2%</div>
        </div>
        <div class="price-card">
          <h3>적정 가치</h3>
          <div class="value">$185.00</div>
          <div class="change">PER 26.4배</div>
        </div>
        <div class="price-card">
          <h3>목표 주가</h3>
          <div class="value">$198.00</div>
          <div class="change positive">상승여력 +16.8%</div>
        </div>
        <div class="price-card">
          <h3>시가총액</h3>
          <div class="value">$2.62T</div>
          <div class="change">글로벌 시가총액 1위</div>
        </div>
      </div>
      
      <div class="analysis-point">
        <strong>주가 하락 요인:</strong><br>
        - 중국 시장에서의 판매 부진 및 경쟁 심화<br>
        - 스마트폰 시장 성장 둔화 및 교체 주기 증가<br>
        - 거시경제적 불확실성과 금리 상승 압박
      </div>
      
      <div class="analysis-point">
        <strong>투자 포인트:</strong><br>
        - 서비스 부문 매출의 지속적 성장 (전년 대비 +16.3%)<br>
        - Vision Pro 출시로 신규 성장 동력 확보<br>
        - 안정적인 현금 창출력과 주주환원 정책<br>
        - AI 기술 투자 확대 및 신규 서비스 개발
      </div>
      
      <div class="analysis-point">
        <strong>투자의견:</strong><br>
        <span style="color: #6FCF97; font-weight: 600;">매수 (Buy)</span><br>
        - 현재 주가($169.58)는 적정가치($185.00) 대비 8.3% 할인된 수준<br>
        - 단기적 조정은 장기 투자 관점에서 매수 기회로 판단<br>
        - 목표가 $198.00까지 16.8% 상승 여력 존재<br>
        - 분할 매수 전략 권장 (현재 30%, $165 지지선 돌파 시 40%, $160 지지선 돌파 시 30%)
      </div>
    </div>
  </div>

  <script>
    const leftData = [
      { label: "iPhone", amount: 69.7, icon: "📱" },
      { label: "Mac", amount: 7.8, icon: "💻" },
      { label: "iPad", amount: 7.0, icon: "📘" },
      { label: "서비스", amount: 23.1, icon: "🛠️" },
      { label: "웨어러블/기타", amount: 12.0, icon: "🎧" }
    ];
    const rightData = [
      { label: "매출원가", amount: 61.7, icon: "🧾" },
      { label: "연구개발비", amount: 8.4, icon: "🧪" },
      { label: "판매관리비", amount: 17.3, icon: "📢" }
    ];
    const totalRevenue = 119.6;
    const totalExpense = 87.4;
    const profit = 32.2;

    function createPath(x1, y1, x2, y2) {
      const controlX = (x1 + x2) / 2;
      const curveOffset = 60;
      return `M ${x1} ${y1} C ${controlX} ${y1 + curveOffset}, ${controlX} ${y2 - curveOffset}, ${x2} ${y2}`;
    }

    function initialize() {
      const svg = document.getElementById('flowSvg');
      svg.innerHTML = '';
      const flowContainer = document.querySelector('.flow-container');
      flowContainer.querySelectorAll('.flow-item').forEach(el => el.remove());
      const centerX = svg.clientWidth / 2;
      const centerY = svg.clientHeight / 2;
      const spacing = 70;

      const defs = document.createElementNS("http://www.w3.org/2000/svg", "defs");
      defs.innerHTML = `
        <linearGradient id="greenGradient"><stop offset="0%" stop-color="#6FCF97" /><stop offset="100%" stop-color="#6FCF97" /></linearGradient>
        <linearGradient id="orangeGradient"><stop offset="0%" stop-color="#F5A623" /><stop offset="100%" stop-color="#F5A623" /></linearGradient>
        <linearGradient id="blueGradient"><stop offset="0%" stop-color="#4A90E2" /><stop offset="100%" stop-color="#4A90E2" /></linearGradient>
      `;
      svg.appendChild(defs);

      leftData.forEach((item, idx) => {
        const y = centerY - ((leftData.length + 1) * spacing) / 2 + idx * spacing;
        const x = centerX - 300;
        const percent = ((item.amount / totalRevenue) * 100).toFixed(1);
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("class", "flow-path");
        path.setAttribute("stroke", "url(#greenGradient)");
        path.setAttribute("d", createPath(x, y, centerX, centerY));
        svg.appendChild(path);
        const div = document.createElement('div');
        div.className = 'flow-item left';
        div.style.top = `${y}px`;
        div.style.left = `${x}px`;
        div.innerHTML = `<span class="icon">${item.icon}</span><span>${item.label}</span><span class="amount">$${item.amount}B</span><span class="percentage">${percent}%</span>`;
        flowContainer.appendChild(div);
      });

      rightData.forEach((item, idx) => {
        const y = centerY - ((rightData.length + 1) * spacing) / 2 + idx * spacing;
        const x = centerX + 300;
        const percent = ((item.amount / totalExpense) * 100).toFixed(1);
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("class", "flow-path");
        path.setAttribute("stroke", "url(#orangeGradient)");
        path.setAttribute("d", createPath(centerX, centerY, x, y));
        svg.appendChild(path);
        const div = document.createElement('div');
        div.className = 'flow-item right';
        div.style.top = `${y}px`;
        div.style.left = `${x}px`;
        div.innerHTML = `<span class="icon">${item.icon}</span><span>${item.label}</span><span class="amount">$${item.amount}B</span><span class="percentage">${percent}%</span>`;
        flowContainer.appendChild(div);
      });

      const y = centerY + ((rightData.length + 1) * spacing) / 2;
      const x = centerX + 300;
      const profitPercent = ((profit / totalRevenue) * 100).toFixed(1);
      const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
      path.setAttribute("class", "flow-path");
      path.setAttribute("stroke", "url(#blueGradient)");
      path.setAttribute("d", createPath(centerX, centerY, x, y));
      svg.appendChild(path);
      const div = document.createElement('div');
      div.className = 'flow-item right';
      div.style.top = `${y}px`;
      div.style.left = `${x}px`;
      div.innerHTML = `<span class="icon">✅</span><span>영업이익</span><span class="amount">$${profit}B</span><span class="percentage">${profitPercent}%</span>`;
      flowContainer.appendChild(div);
    }

    window.addEventListener('load', initialize);
    window.addEventListener('resize', initialize);
  </script>
</body>
</html>
